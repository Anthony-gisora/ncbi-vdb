set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/test-bin )
include_directories( .. )
add_definitions( -DTESTING )

# gtest white box tests
function( test stem )
    add_executable ( test-kfc3-${stem} ${stem}-tst.cpp ../strerror_r.c)
    target_link_libraries ( test-kfc3-${stem} gtest kfc3 ${LQUADMATH} )
    add_test ( NAME Test_KFC3_${stem} COMMAND test-kfc3-${stem} )
endfunction()

test ( ascii )
test ( busy )
test ( decflt )
test ( defs )
test ( except )
test ( fmt-base )
test ( ktrace )
test ( mem )
test ( memset_s )
test ( mmgr )
test ( pmmgr )
test ( ref-na )
test ( ref )
test ( rgn-lock )
test ( rgn )
test ( rsrc-mem )
test ( rsrc-tm )
test ( time )
test ( tmmgr )
test ( xbt )
test ( xp )
test ( z128 )
test ( zigzag )
